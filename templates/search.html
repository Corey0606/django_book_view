<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>

<h3>条件筛选</h3>


<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">

            <a href="/books/add/" class="btn btn-primary">添加书籍</a><a href="/books/search/" class="btn btn-primary">条件筛选</a>
             <table class="table table-bordered table-hover table-striped">

                 <thead>
                    <tr>
                         <th><label for="">编号</label>
                             </th>
                         <th><label for="">书籍名称</label>
                         </th>

                         <th><label for="">价格</label>
                         </th>
                         <th><label for="">出版日期</label>
                         <th><label for="">出版社</label>&nbsp;
                        </th>
                         <th><label for="">作者</label>
                        </th>
                         <th><label for="">操作</label> <a href="/books/search/" class="btn btn-warning">返回</a>
{#                         <select name="publish_id" id="" class="form-control"></select></th></th>#}

                    </tr>
                 </thead>
                 <tbody>
                      {% for book in book_list %}
                      <tr>
                           <td>{{ forloop.counter }}</td>
                           <td>{{ book.title }}</td>
                           <td>{{ book.price }}</td>
                           <td>{{ book.publishDate|date:"Y-m-d" }}</td>
                           <td>
                               {{ book.publish.name }}
                           </td>
                           <td>
                               {% for author in book.author.all %}
                                  {% if forloop.last %}
                                   <span>{{ author.name }}</span>
                                  {% else %}
                                   <span>{{ author.name }}</span>,
                                  {% endif %}

                               {% endfor %}

                           </td>

                           <td>
                               <a href="/books/search/" class="btn btn-warning">返回筛选</a>
{#                               <a href="/books/{{ book.pk }}/delete/" class="btn btn-danger">删除</a>#}
                           </td>

                      </tr>
                      {% endfor %}

                 </tbody>
             </table>
        </div>
    </div>
</div>
{#	<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.0.min.js" ></script>#}
{#    <script>#}
{#        $("#ajax_do1").click(function(){#}
{#            console.log('打印')#}
{#            console.log($('#publish_session option:selected').text());#}
{#              $.ajax({#}
{#               url:"/search/",#}
{#               type:"POST",#}
{#               data:{'publish_session':$('#publish_session option:selected').text()},#}
{#               success:function(data){#}
                   {#console.log(data)#}
{#                   console.log(data);#}
                   {#$('#result').html(data).css({'margin-left':20,'color':'red'})#}
{#               },#}
{#         　　　　　　#}
{#               error: function (jqXHR, textStatus, err) {#}
{#                        console.log(arguments);#}
{#                    },#}
{#                complete: function (jqXHR, textStatus) {#}
{#                        console.log(textStatus);#}
{#                },#}
{#                statusCode: {#}
{#                    '403': function (jqXHR, textStatus, err) {#}
{#                          console.log(arguments);#}
{#                     },#}
{#                     '400': function (jqXHR, textStatus, err) {#}
{#                        console.log(arguments);#}
{#                    }#}
{#                }#}
{#            })#}
{#        })#}
{##}
{#        $("#ajax_do2").click(function(){#}
{#            console.log('打印')#}
{#            console.log($('#author_session option:selected').text());#}
{#              $.ajax({#}
{#               url:"/search/",#}
{#               type:"POST",#}
{#               data:{'author_session':$('#author_session option:selected').text()},#}
{#               success:function(data){#}
                   {#console.log(data)#}
{#                   console.log(data);#}
                   {#$('#result').html(data).css({'margin-left':20,'color':'red'})#}
{#               },#}
{#         　　　　　　#}
{#               error: function (jqXHR, textStatus, err) {#}
{#                        console.log(arguments);#}
{#                    },#}
{#                complete: function (jqXHR, textStatus) {#}
{#                        console.log(textStatus);#}
{#                },#}
{#                statusCode: {#}
{#                    '403': function (jqXHR, textStatus, err) {#}
{#                          console.log(arguments);#}
{#                     },#}
{#                     '400': function (jqXHR, textStatus, err) {#}
{#                        console.log(arguments);#}
{#                    }#}
{#                }#}
{#            })#}
{#        })#}
{#    </script>#}



</body>
</html>